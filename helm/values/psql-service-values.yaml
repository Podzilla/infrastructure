
serviceName: psql

replicaCount: 4

image:
  repository: postgres
  tag: 14.17

service:
  port: 5432
  type: ClusterIP

secretName: psql-secrets

logVolume:
  enabled: true
  size: 1Gi

resources:
  requests:
    cpu: 150m
    memory: 200Mi
  limits:
    cpu: 300m
    memory: 400Mi

initContainers:
  - name: init-users
    image: postgres:14.17
    command: ["/bin/bash", "/scripts/init-users-psql.sh"]
    envFrom:
      - secretRef:
          name: psql-secrets
    volumeMounts:
      - name: init-scripts
        mountPath: /scripts

volumes:
  - name: init-scripts
    configMap:
      name: psql-init-scripts